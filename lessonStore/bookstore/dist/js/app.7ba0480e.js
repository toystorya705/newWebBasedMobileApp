(function(){"use strict";var t={9820:function(t,e,r){var o=r(8935),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"navBar"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"searcBar",attrs:{placeholder:"Search Lesson",icon:"search"},domProps:{value:t.filter},on:{keyup:t.productsFetch,input:function(e){e.target.composing||(t.filter=e.target.value)}}}),t._m(0),r("span",{staticStyle:{"font-size":"30px",cursor:"pointer"},attrs:{onclick:"openNav()"}},[t._v("☰ open")])]),r("p",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.filterName,expression:"filterName"}],attrs:{type:"radio",id:"default",value:"default"},domProps:{checked:t._q(t.filterName,"default")},on:{click:t.defaultClick,change:function(e){t.filterName="default"}}}),r("label",{attrs:{for:"default"}},[t._v("Default")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.filterName,expression:"filterName"}],attrs:{type:"radio",id:"price",value:"price"},domProps:{checked:t._q(t.filterName,"price")},on:{click:t.filterClick,change:function(e){t.filterName="price"}}}),r("label",{attrs:{for:"price"}},[t._v("Price")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.filterName,expression:"filterName"}],attrs:{type:"radio",id:"location",value:"location"},domProps:{checked:t._q(t.filterName,"location")},on:{click:t.filterClick,change:function(e){t.filterName="location"}}}),r("label",{attrs:{for:"location"}},[t._v("location")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.filterName,expression:"filterName"}],attrs:{type:"radio",id:"stock",value:"stock"},domProps:{checked:t._q(t.filterName,"stock")},on:{click:t.filterClick,change:function(e){t.filterName="stock"}}}),r("label",{attrs:{for:"stock"}},[t._v("Stock")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.filterName,expression:"filterName"}],attrs:{type:"radio",id:"subject",value:"subject"},domProps:{checked:t._q(t.filterName,"subject")},on:{click:t.filterClick,change:function(e){t.filterName="subject"}}}),r("label",{attrs:{for:"subject"}},[t._v("Subject")])]),r("p",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.sort,expression:"sort"}],attrs:{type:"radio",id:"asec",value:"asec"},domProps:{checked:t._q(t.sort,"asec")},on:{change:function(e){t.sort="asec"}}}),r("label",{attrs:{for:"asec"}},[t._v("Aescending")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.sort,expression:"sort"}],attrs:{type:"radio",id:"dsec",value:"dsec"},domProps:{checked:t._q(t.sort,"dsec")},on:{change:function(e){t.sort="dsec"}}}),r("label",{attrs:{for:"dsec"}},[t._v("Descending")])]),r("button",{attrs:{disabled:t.cartCheckDisable},on:{click:t.showCart}},[t._v(t._s(t.cartItemCount)+" "),r("span",{staticClass:"glyphicon glyphicon-shopping-cart"}),t._v("Cart ")]),r(t.showProduct,{tag:"component",attrs:{cart:t.cart,cartCount:t.cartCount,getproduct:t.getproduct,product:t.product},on:{removeButton:t.removeButton,addItem:t.addItem}})],1)},c=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sidenav",attrs:{id:"mySidenav"}},[r("a",{staticClass:"closebtn",attrs:{href:"javascript:void(0)",onclick:"closeNav()"}},[t._v("×")]),r("a",{attrs:{href:"#"}},[t._v("About")]),r("a",{attrs:{href:"#"}},[t._v("Services")]),r("a",{attrs:{href:"#"}},[t._v("Clients")]),r("a",{attrs:{href:"#"}},[t._v("Contact")])])}],i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.getproduct,(function(e,o){return r("div",{key:o,staticClass:"card",staticStyle:{width:"18rem"}},[r("img",{staticClass:"card-img-top",attrs:{src:e.image,alt:"Card image cap"}}),r("div",{staticClass:"card-body"},[r("p",{staticClass:"card-title"},[t._v("Subject: "+t._s(e.subject))]),r("p",[t._v("Location: "+t._s(e.location))]),r("p",[t._v("Price: "+t._s(e.price))]),r("p",[t._v("Stock: "+t._s(e.stock))]),r("div"),r("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:0==e.stock},on:{click:function(r){return t.addItem(e)}}},[t._v(" Add To Cart ")]),0===e.stock?r("span",[t._v("All out!")]):e.stock<5?r("span",[t._v(" Only "+t._s(e.stock)+" left! ")]):r("span",[t._v("Buy now!")])])])})),0)},a=[],n={name:"ProductList",props:["product","getproduct"],data(){return{filterName:""}},methods:{addItem(t){console.log(this.$parent.cartCount(4)),t.stock>0&&(console.log(t),this.$emit("addItem",t))}}},l=n,u=r(1001),d=(0,u.Z)(l,i,a,!1,null,null,null),p=d.exports,f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"checkoutBody"},[t._l(t.product,(function(e,o){return r("div",{key:o,staticClass:"card",staticStyle:{width:"18rem"}},[t.cartCount(o)>0?r("div",[r("img",{staticClass:"card-img-top",attrs:{src:e.image,alt:"Card image cap"}}),r("div",{staticClass:"card-body"},[r("p",{staticClass:"card-title"},[t._v("Subject: "+t._s(e.subject))]),r("p",[t._v("Location: "+t._s(e.id))]),r("p",[t._v("Price: "+t._s(e.price))]),r("p",[t._v("Stock Added to Cart: "+t._s(t.cartCount(o)))]),r("div"),r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.removeButton(o)}}},[t._v("Remove")])])]):t._e()])})),r("h2",[t._v("Checkout")]),r("p",[r("strong",[t._v("Name:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.name,expression:"order.name"}],domProps:{value:t.order.name},on:{input:function(e){e.target.composing||t.$set(t.order,"name",e.target.value)}}})]),r("p",[r("strong",[t._v("Phone:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.order.phone,expression:"order.phone"}],domProps:{value:t.order.phone},on:{input:function(e){e.target.composing||t.$set(t.order,"phone",e.target.value)}}})]),r("h2",[t._v("Order Information")]),r("p",[t._v("Name: "+t._s(t.order.name))]),r("p",[t._v("Phone: "+t._s(t.order.phone))]),r("button",{attrs:{disabled:t.submitForm},on:{click:t.placeOrder}},[t._v("Place Order")]),r("p",[t._v(" "+t._s(t.messageCheckout))])],2)])},h=[],m={name:"formList",props:["cart","product","cartCount"],data(){return{messageCheckout:"",order:{name:"",phone:""}}},methods:{removeButton(t){this.$emit("removeButton",t)},placeOrder:async function(){console.log(this.cartCount(1)+" ttttttt");let t=[],e=[];for(let o=0;o<this.product.length;o++)0!=this.$parent.cartCount(this.product[o].id)&&(t.push(Object.assign({},this.order,{productID:this.product[o]._id,stock:this.cartCount(this.product[o].id)})),e.push(Object.assign({},this.product[o],{stock:this.product[o].stock})),console.log("hjueheufjeferf"));console.log(t,e,e[0]._id);let r=await this.fetchFunction(t,"POST","https://vueproject99.herokuapp.com/collection/users");if("OK"==r)for(let o=0;o<e.length;o++){let t=e[o]._id;delete e[o]._id;let r=await this.fetchFunction(e[o],"PUT","https://vueproject99.herokuapp.com/collection/products/"+t);console.log(r)}console.log("yoyoy"),console.log(r),this.messageCheckout="Order Placed"},fetchFunction:async function(t,e,r){const o=await fetch(r,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await o.text()}},computed:{submitForm(){return!(this.order.name.match(/[A-Za-z]/)&&this.order.phone.match(/[0-9]/)&&this.order.phone.length>=10)}}},v=m,_=(0,u.Z)(v,f,h,!1,null,null,null),k=_.exports,g={name:"App",components:{"products-list":p,"form-list":k},data(){return{sitename:"Book Store",cart:[],showProduct:p,product:[{}],filter:"",filterName:"",sort:""}},methods:{async productsFetch(){let t;""!=this.filter?(this.product=null,t=await fetch("https://vueproject99.herokuapp.com/collection/products/"+this.filter),console.log("yoyoy")):t=await fetch("https://vueproject99.herokuapp.com/collection/products");const e=await t.json();this.product=e,console.log(this.product)},addItem(t){--this.product[t.id].stock,this.cart.push(t.id),console.log(this.cart)},removeButton(t){this.product[t].stock++;for(let e=0;e<this.cart.length;e++)if(this.cart[e]==t){this.cart.splice(e,1);break}},cartCount(t){let e=0;for(let r=0;r<this.cart.length;r++)this.cart[r]===t&&e++;return e},showCart(){this.showProduct=this.showProduct==p?k:p},filterClick(){this.sort="asec"},defaultClick(){this.sort=""}},computed:{cartCheckDisable:function(){return this.showProduct!=k&&0===this.cart.length},cartItemCount:function(){return this.cart.length||""},getproduct(){var t=this.product;if(console.log("33"),"subject"==this.filterName){if("dsec"==this.sort)return t.sort(((t,e)=>e.subject>t.subject?1:-1));if("asec"==this.sort)return t.sort(((t,e)=>e.subject<t.subject?1:-1))}else if("price"==this.filterName){if("dsec"==this.sort)return t.sort((function(t,e){return e.price-t.price}));if("asec"==this.sort)return t.sort((function(t,e){return t.price-e.price}))}else if("location"==this.filterName){if("dsec"==this.sort)return t.sort(((t,e)=>e.location>t.location?1:-1));if("asec"==this.sort)return t.sort(((t,e)=>e.location<t.location?1:-1))}else{if("stock"!=this.filterName)return t;if("dsec"==this.sort)return t.sort((function(t,e){return e.stock-t.stock}));if("asec"==this.sort)return t.sort((function(t,e){return t.stock-e.stock}))}return t}},created(){this.productsFetch()},mounted:function(){this.productsFetch()}},b=g,C=(0,u.Z)(b,s,c,!1,null,null,null),y=C.exports;o.Z.config.productionTip=!1,new o.Z({render:t=>t(y)}).$mount("#app")}},e={};function r(o){var s=e[o];if(void 0!==s)return s.exports;var c=e[o]={exports:{}};return t[o](c,c.exports,r),c.exports}r.m=t,function(){var t=[];r.O=function(e,o,s,c){if(!o){var i=1/0;for(u=0;u<t.length;u++){o=t[u][0],s=t[u][1],c=t[u][2];for(var a=!0,n=0;n<o.length;n++)(!1&c||i>=c)&&Object.keys(r.O).every((function(t){return r.O[t](o[n])}))?o.splice(n--,1):(a=!1,c<i&&(i=c));if(a){t.splice(u--,1);var l=s();void 0!==l&&(e=l)}}return e}c=c||0;for(var u=t.length;u>0&&t[u-1][2]>c;u--)t[u]=t[u-1];t[u]=[o,s,c]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,o){var s,c,i=o[0],a=o[1],n=o[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(s in a)r.o(a,s)&&(r.m[s]=a[s]);if(n)var u=n(r)}for(e&&e(o);l<i.length;l++)c=i[l],r.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return r.O(u)},o=self["webpackChunkbookstore"]=self["webpackChunkbookstore"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(9820)}));o=r.O(o)})();
//# sourceMappingURL=app.7ba0480e.js.map